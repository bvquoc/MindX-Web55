# Deep copy và Shallow copy

JavaScript có các kiểu dữ liệu reference type là Array, function và object

Khi sao chép các biến này, ta sẽ nhận được địa chỉ trỏ tới ô nhớ chứa giá trị của biến đó

Nên khi gán 1 biến bằng giá trị của 1 biến reference, thì khi thao tác trên biến mới, giá trị của biến cũ cũng bị thay đổi theo

- Shallow copy chỉ sao chép những giá trị ở tầng 1 nhưng các giá trị lồng nhau (nested) vẫn reference một đối tượng ban đầu.

- Deep copy đơn giản là clone giá trị của 1 biến, tuy nhiên khi thao tác với biến mới, sẽ không ảnh hưởng đến giá trị của biến ban đầu.

Để `deep copy`, ta có thể sử dụng đệ quy hoặc các thư viện hỗ trợ khác

```js
const macbooks = ['macbook2015', { model: 'macbook2014' }, 'macbook2017'];
const apples = [...macbooks];
apples[0] = 'air';
apples[1].model = 'm1';
console.log(macbooks); // ['macbook2015', { model: 'm1' }, 'macbook2017']
console.log(apples); // ['air', { model: 'm1' }, 'macbook2017']
```

Khi assign `apples = [...macbooks]`, biến `apples` sẽ nhận các giá trị là các phần tử của mảng `macbooks`, tuy nhiên `macbooks[1]` là 1 object (reference type) nên `apples[1]` và `macbooks[1]` sẽ trỏ về cùng 1 ô nhớ. Khi đó, thao tác trên `apples[1]` cũng sẽ làm thay đổi giá trị của `macbooks[1]` (vì bản chất chúng ta đang thao tác trên cùng 1 đối tượng)
